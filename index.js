(()=>{"use strict";var e={userNameSelector:".profile__name-text",userJobSelector:".profile__job-text",userAvatarSelector:".profile__photo",userAvatarButtonSelector:".profile__edit-avatar",buttonUserSelector:".profile__edit-button",buttonAddCardSelector:".profile__add-button",formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",popupOpenedClass:"popup_opened",popupButtonCloseClass:"popup__button-close",popupUpdateAvatar:".popup_type_avatar",popupUserSelector:".popup_type_profile",popupInputNameSelector:".popup__input_fullname",popupInputJobSelector:".popup__input_job",popupAddCardSelector:".popup_type_card-add",popupImageSelector:".popup_type_image",popupImageImgSelector:".popup__image",popupImageTitleSelector:".popup__image-title",popupConfirmationSelector:".popup_type_confirmation",cardsItemsSelector:".cards__items",cardItemSelector:".cards__item",cardImgSelector:".cards__img",cardTitleSelector:".cards__title",cardHeartSelector:".cards__heart",cardCountLikesSelector:".cards__count-likes",cardTrashSelector:".cards__trash",cardTemplateSelector:"#card__template",cardLikeClass:"cards__heart_active",serverUrl:"https://mesto.nomoreparties.co/v1/cohort-42",token:"29779b63-56c9-48f1-bf2c-946b66c63b59"};function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(){function n(e,t,o,i,a,c,u,s,l,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r(this,"_id",void 0),r(this,"_link",void 0),r(this,"_name",void 0),r(this,"_havingTrash",void 0),r(this,"_countLikes",void 0),r(this,"_havingLikeActive",void 0),r(this,"_cardTemplate",void 0),r(this,"_handleClickImage",void 0),r(this,"_handleClickLike",void 0),r(this,"_handleClickRemove",void 0),r(this,"_cardElement",void 0),r(this,"_cardImageElement",void 0),r(this,"_cardTitleElement",void 0),r(this,"_heartElement",void 0),r(this,"_countLikesElement",void 0),r(this,"_trashElement",void 0),this._id=e,this._link=t,this._name=o,this._havingTrash=i,this._countLikes=c,this._havingLikeActive=a,this._cardTemplate=document.querySelector(u).content,this._handleClickImage=s,this._handleClickLike=l,this._handleClickRemove=p}var o,i;return o=n,(i=[{key:"_getCardMarkup",value:function(){this._cardElement=this._cardTemplate.querySelector(e.cardItemSelector).cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(e.cardImgSelector),this._cardTitleElement=this._cardElement.querySelector(e.cardTitleSelector),this._heartElement=this._cardElement.querySelector(e.cardHeartSelector),this._countLikesElement=this._cardElement.querySelector(e.cardCountLikesSelector),this._trashElement=this._cardElement.querySelector(e.cardTrashSelector)}},{key:"getCard",value:function(){var t=this;return this._getCardMarkup(),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleElement.textContent=this._name,this._havingTrash||(this._trashElement.remove(),this._trashElement=null),this._countLikesElement.textContent=this._countLikes?this._countLikes:"",this._havingLikeActive&&this._heartElement.classList.add(e.cardLikeClass),this._heartElement.addEventListener("click",(function(){return t._handleClickLike(t._id,t._heartElement,t._countLikesElement)})),this._cardImageElement.addEventListener("click",(function(){return t._handleClickImage(t._link,t._name)})),this._havingTrash&&this._trashElement.addEventListener("click",(function(){return t._handleClickRemove(t._id,t._cardElement)})),this._cardElement}}])&&t(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}();function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_params",void 0),i(this,"_form",void 0),i(this,"_inputList",void 0),i(this,"_button",void 0),this._params=t,this._form=r,this._inputList=Array.from(this._form.querySelectorAll(this._params.inputSelector)),this._button=this._form.querySelector(this._params.submitButtonSelector)}var t,r;return t=e,(r=[{key:"_enableButton",value:function(){this._button.disabled=!1,this._button.classList.remove(this._params.inactiveButtonClass)}},{key:"_disableButton",value:function(){this._button.disabled=!0,this._button.classList.add(this._params.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._disableButton():this._enableButton()}},{key:"_showError",value:function(e,t){var r=e.parentNode.querySelector("#".concat(e.id,"-error"));r.textContent=t,r.classList.add(this._params.errorClass),e.classList.add(this._params.inputErrorClass)}},{key:"_hideError",value:function(e){var t=e.parentNode.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._params.errorClass),e.classList.remove(this._params.inputErrorClass)}},{key:"_validateInput",value:function(e){if(e.validity.valid)this._hideError(e);else{var t=e.validationMessage;this._showError(e,t)}}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._validateInput(t),e._toggleButtonState()}))}))}},{key:"clearErrors",value:function(){var e=this;this._inputList.forEach((function(t){var r=t.closest(e._params.formSelector).querySelector("#".concat(t.id,"-error"));e._hideError(t,r)})),this._disableButton()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"_popup",void 0),u(this,"_popupOpenedClass",void 0),u(this,"_popupButtonCloseClass",void 0),u(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popup=document.querySelector(r),this._popupOpenedClass=e.popupOpenedClass,this._popupButtonCloseClass=e.popupButtonCloseClass}var r,n;return r=t,(n=[{key:"open",value:function(){this._popup.classList.add(this._popupOpenedClass),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._popupOpenedClass),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains(e._popupOpenedClass)||t.target.classList.contains(e._popupButtonCloseClass))&&e.close()}))}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=d(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function _(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t,r=e.popupSelector,n=e.popupImageImgSelector,o=e.popupImageTitleSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),y(m(t=i.call(this,r)),"_imageElement",void 0),y(m(t),"_titleElement",void 0),t._imageElement=document.querySelector(n),t._titleElement=document.querySelector(o),t}return t=a,(r=[{key:"open",value:function(e,t){this._imageElement.src=e,this._imageElement.alt=t,this._titleElement.textContent=t,f(v(a.prototype),"open",this).call(this)}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=k(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},E.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function w(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(n);if(o){var r=L(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w(this,e)});function a(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),j(O(n=i.call(this,e)),"_handleSubmit",void 0),j(O(n),"_form",void 0),j(O(n),"_getInputValues",(function(){return Object.fromEntries(new FormData(n._form))})),j(O(n),"setInputValue",(function(e,t){n._form.querySelector(e).value=t})),n._handleSubmit=t,n._form=document.querySelector(e).querySelector(r),n}return t=a,(r=[{key:"close",value:function(){E(L(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;E(L(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"_initialArray",void 0),T(this,"_renderer",void 0),T(this,"_container",void 0),this._initialArray=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"renderItems",value:function(){this._initialArray.forEach(this._renderer)}},{key:"addItemPrepend",value:function(e){this._container.prepend(e)}},{key:"addItemAppend",value:function(e){this._container.append(e)}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=function(){function e(t){var r=t.userNameSelector,n=t.userJobSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"_userNameElement",void 0),q(this,"_userJobElement",void 0),q(this,"_userAvatarElement",void 0),this._userNameElement=document.querySelector(r),this._userJobElement=document.querySelector(n),this._userAvatarElement=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{userName:this._userNameElement.textContent,userJob:this._userJobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.userName,r=e.userJob;this._userNameElement.textContent=t,this._userJobElement.textContent=r}},{key:"setUserAvatar",value:function(e){var t=e.userAvatarSrc;this._userAvatarElement.src=t}}])&&R(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"_url",void 0),x(this,"_headers",void 0),x(this,"_handleResponse",(function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})),this._url=t.baseUrl,this._headers=t.headers}var t,r;return t=e,(r=[{key:"getUser",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"updateUserData",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){var t=e._id;return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"likeCard",value:function(e){var t=e._id;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(e){var t=e._id;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=H(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},V.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}function z(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(n);if(o){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return z(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),K(F(r=i.call(this,e)),"_handleSubmit",void 0),K(F(r),"_form",void 0),K(F(r),"_idCard",void 0),K(F(r),"_cardElement",void 0),r._form=document.querySelector(e).querySelector(t),r}return t=a,(r=[{key:"open",value:function(e,t,r){V(G(a.prototype),"open",this).call(this),this._handleSubmit=r,this._idCard=e,this._cardElement=t}},{key:"setEventListeners",value:function(){var e=this;V(G(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._idCard,e._cardElement)}))}}])&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s),W=document.querySelector(e.userAvatarButtonSelector),X=document.querySelector(e.buttonUserSelector),Y=document.querySelector(e.buttonAddCardSelector),Z=document.querySelector(e.popupUpdateAvatar).querySelector(e.formSelector),$=document.querySelector(e.popupUserSelector).querySelector(e.formSelector),ee=document.querySelector(e.popupAddCardSelector).querySelector(e.formSelector),te=Z.querySelector(e.submitButtonSelector),re=$.querySelector(e.submitButtonSelector),ne=ee.querySelector(e.submitButtonSelector),oe=document.querySelector(e.popupConfirmationSelector).querySelector(e.submitButtonSelector),ie=new N({baseUrl:e.serverUrl,headers:{authorization:e.token,"Content-Type":"application/json"}});function ae(t){var r=t.id,o=t.link,i=t.name,a=t.havingTrash,c=t.havingLikeActive,u=t.countLikes;return new n(r,o,i,a,c,u,e.cardTemplateSelector,ce,ue,pe).getCard()}function ce(e,t){me.open(e,t)}function ue(t,r,n){function o(e){n.textContent=e||""}r.classList.contains(e.cardLikeClass)?ie.deleteLikeCard({_id:t}).then((function(t){o(t.likes.length),r.classList.remove(e.cardLikeClass)})).catch((function(e){return console.log(e)})):ie.likeCard({_id:t}).then((function(t){o(t.likes.length),r.classList.add(e.cardLikeClass)})).catch((function(e){return console.log(e)}))}function se(e,t){oe.textContent="Удаление...",ie.deleteCard({_id:e}).then((function(){le.close(),t.remove(),t=null})).catch((function(e){return console.log(e)}))}var le=new Q(e.popupConfirmationSelector,e.formSelector);function pe(e,t){oe.textContent="Да",le.open(e,t,se),le.setEventListeners()}var fe=new P(e.popupUserSelector,(function(e){re.textContent="Сохранение...",ie.updateUserData({name:e.fullname,about:e.job}).catch((function(e){return console.log(e)})),de.setUserInfo({userName:e.fullname,userJob:e.job}),fe.close()}),e.formSelector),de=new B({userNameSelector:e.userNameSelector,userJobSelector:e.userJobSelector,userAvatarSelector:e.userAvatarSelector}),he={};ie.getUser().then((function(t){de.setUserInfo({userName:t.name,userJob:t.about}),de.setUserAvatar({userAvatarSrc:t.avatar});var r=t._id;ie.getInitialCards().then((function(t){(he=new A({items:t,renderer:function(e){var t=e._id,n=e.link,o=e.name,i=e.owner,a=e.likes,c=ae({id:t,link:n,name:o,havingTrash:i._id===r,havingLikeActive:!!a.find((function(e){return e._id===r})),countLikes:a.length});he.addItemAppend(c)}},e.cardsItemsSelector)).renderItems()})).catch((function(e){return e}))})).catch((function(e){return e}));var _e=new P(e.popupAddCardSelector,(function(e){ne.textContent="Сохранение...",ie.addCard({name:e.name,link:e.link}).then((function(t){var r=ae({id:t._id,link:e.link,name:e.name,havingTrash:!0,havingLikeActive:!1,countLikes:0});he.addItemPrepend(r),_e.close()})).catch((function(e){return console.log(e)}))}),e.formSelector),me=new b({popupSelector:e.popupImageSelector,popupImageImgSelector:e.popupImageImgSelector,popupImageTitleSelector:e.popupImageTitleSelector}),ve=new a(e,ee),ye=new a(e,$),be=new a(e,Z);X.addEventListener("click",(function(){var t=de.getUserInfo(),r=t.userName,n=t.userJob;fe.setInputValue(e.popupInputNameSelector,r),fe.setInputValue(e.popupInputJobSelector,n),re.textContent="Сохранить",fe.open(),ye.clearErrors()})),fe.setEventListeners(),Y.addEventListener("click",(function(){ne.textContent="Создать",_e.open(),ve.clearErrors()}));var Se=new P(e.popupUpdateAvatar,(function(e){te.textContent="Сохранение...",ie.updateUserAvatar({avatar:e.link_avatar}).then((function(e){de.setUserAvatar({userAvatarSrc:e.avatar}),Se.close()})).catch((function(e){return console.log(e)}))}),e.formSelector);W.addEventListener("click",(function(){te.textContent="Сохранить",Se.open(),be.clearErrors()})),_e.setEventListeners(),me.setEventListeners(),Se.setEventListeners(),ye.enableValidation(),ve.enableValidation(),be.enableValidation()})();